factory method pattern explained with real world problem based on decoration and you find the solution here.
